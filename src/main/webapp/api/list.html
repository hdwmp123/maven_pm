<#include "/common/_layout.html"/>
<#include "/common/_search_form.html"/>
<@layout>
<h1>API管理&nbsp;&nbsp;
<a href="/api/add">创建API</a>
</h1>
<@search_form actionUrl="/api/page">
隶属项目：
<select name="project_id" id="project_id">
	<#list projectList as x>
	<option value="${x.id}" <#if (project_id)?? && project_id=x.id>selected="selected"</#if> >
	${x.project_name}
	</option>
	</#list>
</select>
模块：
<select name="module_id" id="module_id">
</select>
<script type="text/javascript">
$(document).ready(function(){
	var initSel = function(callback){
		SelectTool.initSelectData({
			elId:"module_id",
			url:"/module/listByProjectId",
			postData:{"project_id":$("#project_id").val()},
			valueName:"id",
			textName:"module_name",
			defaultValue:"${(module_id)!}",
			haveAll:true,
			callback:callback
		});
	}
	$("#project_id").change(function(){
		initSel(function(){
			initSearch(1);
		});
	});
	$("#module_id").change(function(){
		initSearch(1);
	});
	initSel(function(){
		initSearch(1);
	});
});
</script>
</@search_form>
</@layout>